title = "Crear nuevo pago"
url = "/crear-nuevo-pago"
layout = "default"
is_hidden = 0

[session]
security = "user"
allowedUserGroups[] = "administrador"
allowedUserGroups[] = "supervisor"
redirect = "iniciar-sesion"
==
<?php
function onStart(){
    $this['categoria']=new class {
        public function cat(){
            $data= Db::select('select nombrecat from club_categoriadepago', [1]);
            foreach($data as $data1) 
                {
                    foreach($data1 as $data2)
                       { echo "
						<option value=\"$data2\">$data2</option>";}
					
                }
                            }
                                };
}   


function onEnviar(){
    $nombre=$_POST['nombre'];
    $codigo=$_POST['codigo'];
    $categoria=$_POST['categoria'];
    $monto=$_POST['monto'];
    $descripcion=$_POST['descripcion'];
    $fechac=$_POST['fechac'];

    $result=Db::insert('insert into club_tiposdepagos (nombredepago,categoria,codigo_pago,monto,descripcion,fechadecierre) values (?,?,?,?,?,?)', [$nombre,$categoria,$codigo,$monto, $descripcion,$fechac]);
    if ($result)
    {
    echo "Datos guardados correctamente";  
    header("Refresh:0");
    }
    }
?>
==
{% component 'session' %}

{% put scripts %}
    <script src="{{ [
        'assets/javascript/pages/ui-elements.js',
    ]|theme }}"></script>
{% endput %}
<script>
    function Confirmcancelar()
    {
      var x = confirm("¿Seguro que quiere cancelar?");
      if (x)
          return history.back();
      else
        return false;
    }
     function Confirmatras()
    {
      var x = confirm("¿Seguro que quiere abandonar el registro?");
      if (x)
          return history.back();
      else
        return false;
    }
</script>
<style>
	#line {
		display: inline;
	}

	table {
		border-collapse: collapse;
		border-spacing: 0;
		margin: 0 auto;
		width: 50%;
		border: 1px solid #ddd;
	}

	td {
		padding: 3%;
		margin: 0 auto;
	}

	#button {
		align-content: center;
		text-align: center;
	}

	#button button {
		width: 155px;
		border-radius: 6px;
		margin: 20px;
	}
	h6{display:inline;}
</style>

<section id="layout-title">
	<div class="container">
		<h3 style="text-align: center">Crear nuevo pago</h3>
	</div>
</section>

<div class="col-sm-2">
	<a class="btn btn-block btn-lg btn-primary" VALUE="Volver" onClick="return Confirmatras();">Regresar</a>
</div>

<p>&nbsp;</p>

<form data-request="onEnviar" method="POST">
	<div style="overflow-x:auto;">
		<table>
			<tr>
				<td>
					<h6>Nombre del pago:</h6>
					<h6 style="color: red;">*</h6>
				</td>
				<td><input class="form-control" type="text" name="nombre" style="width: 100%;" required></td>
			</tr>
			<tr>
				<td>
					<h6>Codigo de pago:</h6>
					<h6 style="color: red;">*</h6>
				</td>
				<td><input class="form-control" type="text" name="codigo" style="width: 100%;" required></td>
			</tr>
			<tr>
				<td>
					<h6>Categoria de pago:</h6>
					<h6 style="color: red;">*</h6>
				</td>
				<td><select class="form-control select select-default" name="categoria" data-toggle="select" required>
				<option disabled selected value> -- seleccione una opción -- </option>
                {{categoria.cat}}
                </select></td>
            </tr>
			
			
			
			<tr>
				<td>
					<h6>Monto:</h6>
					<h6 style="color: red;">*</h6>
				</td>
				<td><input class="form-control" type="text" name="monto" style="width: 100%;" required></td>
			</tr>
			<tr>
				<td>
					<h6>Descripcion:</h6>
				</td>
				<td><input class="form-control" type="text" name="descripcion" style="width: 100%;"></td>
			</tr>
			<tr>
				<td>
					<h6>Fecha de cierre:</h6>
					<h6 style="color: red;">*</h6>
				</td>
				<td><input class="form-control" type="date" name="fechac" style="width: 100%;" required></td>
			</tr>
		</table>
	</div>
	<div id="button">
		<button type="submit">Guardar</button>
		<button type="button" onclick="return Confirmcancelar();">Cancelar</button>
	</div>
</form>